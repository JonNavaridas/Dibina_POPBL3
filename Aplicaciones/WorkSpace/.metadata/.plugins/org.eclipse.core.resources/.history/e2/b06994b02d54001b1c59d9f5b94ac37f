package comunicacionServer;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;

import elementos.Pedido;

public class Server {
	
	public static void main(String[] args) throws IOException {
		OutputStreamWriter out;
		BufferedReader in;
		ServerSocket s;
		Object mensaje;
		Socket c;
		int port;
		
		if(args.length<1)
		{
			System.out.println("Sintaxis de llamada: java EcoServ <puerto>");
			System.exit(-1);
		}
		
		port=Integer.valueOf(args[0]).intValue();
		s= new ServerSocket(port);
		c = s.accept();
		in=new BufferedReader(new InputStreamReader( c.getInputStream()));
		out=new OutputStreamWriter(c.getOutputStream());
		
		while((mensaje=in.readLine())!=null) {
			System.out.println("recibí " + mensaje);
			
			List<Pedido> listaPedidos = new ArrayList<>();
			listaPedidos.add((Pedido)mensaje);
			
			out.write(mensaje.toString() + '\n');
			out.flush();
		}
		
		out.close();
		in.close();
		c.close();
		s.close();
	}
	
	public boolean getInfo(String operacion) {
		boolean operacionConocida = true;
		
		switch(operacion) {
		case "add pedido":
			break;
		case "remove productos":
			break;
		case "new user":
			break;
		default: operacionConocida = false;
			break;
		}
		
		return operacionConocida;
	}
}